
let spc1 = { masp: 1, tensp: "COMBO DƯỠNG DA SẠCH MỤN MENLY", dongia: 1479000 , hinhanh: "../images/sanpham/sanphamchinh/1.jpg",mota: "Sở hữu làn da trắng, sạch mụn không chỉ là mơ ước của riêng phái nữ. Hiểu được tâm lý này của các đấng mài râu, BỘ TỨ DƯỠNG DA SẠCH MỤN MENLY sẽ giúp anh em có được làn da như ý!<br>Sử dụng trọn bộ mỹ phẩm chăm sóc da bao gồm: Sữa rửa mặt MENY, Toner dưỡng ẩm MENLY, Serum dưỡng trắng MENLY và Kem trị mụn MENLY sẽ mang lại cho bạn những kết quả ngoài mức mong đợi. BỘ TỨ DƯỠNG TRẮNG DA SẠCH MỤN MENLY với chiết xuất từ thiên nhiên giúp làn da nam giới được nâng niu trọn vẹn. " };
let spc2 = { masp: 2, tensp: "TONER SE KHÍT LỖ CHÂN LÔNG MENLY", dongia: 307000, hinhanh: "../images/sanpham/sanphamchinh/2.png",mota: "Toner Se khít lỗ chân lông MENLY là sự kết hợp đỉnh cao của nghệ thuật điều chế và khoa học về nguyên liệu thiên nhiên.Với thành phần chính là tinh chất từ cánh hoa cúc Xu Xi, cúc La Mã nổi tiếng với công dụng kháng viêm, làm giảm các triệu chứng mẫn cảm, mụn sưng và giúp làm lành các vết thương nhỏ. Chai Toner được thiết kế dưới dạng vòi xịt phun sương, rất tiện lợi để mang theo sử dụng trong ngày, khi đi chơi xa và dã ngoại, như một dạng xịt khoáng thiên nhiên, giúp làm sạch và dịu da. Nhất là trong tiết trời nắng nóng oi bức." };
let spc3 = { masp: 3, tensp: "SỬA RỬA MẶT MENLY", dongia: 397000, hinhanh: "../images/sanpham/sanphamchinh/3.png",mota: "SỮA RỬA MẶT M.E.N.L.Y là dòng sản phẩm được sản xuất với công thức độc quyền danh riêng cho làn da nam giới. Đây là dòng sữa rửa mặt KHÔNG BỌT đầu tiên cho nam giới tại Việt Nam với độ pH 6.0 đạt CHUẨN đảm bảo lấy sạch bụi bẩn, nhờn thừa nhưng vẫn tuyệt đối AN TOÀN cho da. Với hương thơm tinh dầu nam tính vừa giúp làm sạch, vừa tạo cảm giác thư giãn trong quá trình massage, rửa mặt. Vì là sản phẩm hoàn toàn thiên nhiên nên bạn sẽ KHÔNG phải LO LẮNG về vấn đề ăn mòn da. Hàm lượng dưỡng chất và chiết xuất DỒI DÀO trong SỮA RỬA MẶT M.E.N.L.Y giúp nâng niu và bảo vệ làn da nam giới vượt trội." };
let spc4 = { masp: 4, tensp: "SỮA TẮM THẢI ĐỘC MENLY", dongia: 369000, hinhanh: "../images/sanpham/sanphamchinh/4.jpeg",mota: "Mụn lưng, mụn ngực, viêm lỗ chân lông... có một sản phẩm sẽ giúp bạn tiêu diệt những nỗi lo này! SỮA TẮM THẢI ĐỘC MENLY sẽ là sản phẩm hữu hiệu cho bạn.<br>Sữa tắm thải độc MENLY được chiết  xuất từ:<br>- Aloe Vera Extract: cung cấp các Vitamin và dưỡng chất cần thiết cho da, duy trì độ ẩm, giúp da luôn mịn màng, mềm mại. <br>- Calendula Hydrosol (Hydrosol từ Hoa Cúc Xu Xi): giàu flavonoids, giúp chống oxi hoa và ngăn ngừa lão hóa da, đồng thời Calendula Hydrosol còn chứa acid oleanolic giúp làm dịu da, chống kích ứng, giảm stress và bảo vệ da dưới tác hại của môi trường <br>- Blend Tinh dầu Trị Liệu: kích thích tuần hoàn máu, hương thơm tự nhiên giúp thư giãn, giảm căng thẳng, mệt mỏi. " };
let spc5 = { masp: 5, tensp: "SERUM DƯỠNG TRẮNG DA MENLY", dongia: 372000, hinhanh: "../images/sanpham/sanphamchinh/5.jpg",mota: "Serum là dòng sản phẩm không còn xa lạ với chị em phụ nữ nữa. Tuy nhiên, ít người biết rằng, ngay cả nam giới cũng có thể sử dụng serum để chăm sóc cho làn da của mình.<br>Trong serum dưỡng trắng MENLY có chứa chủ yếu là Arbutin, Vitamin C-E. Đây đều là các hoạt chất giúp làm sáng da vô cùng an toàn. Không chỉ vậy, chúng còn có tác dụng làm mờ thâm nám, giúp da đều màu hơn và làm da trắng sáng một cách tự nhiên. Làn da của bạn sẽ được quan tâm và chăm sóc toàn diện, giúp các chàng trai có làn da trắng sáng khỏe mạnh, lấy lại tự tin khi giao tiếp cũng như gây ấn tượng với người đối diện" };
let spc6 = { masp: 6, tensp: "EM TRỊ MỤN MENLY", dongia: 417000, hinhanh: "../images/sanpham/sanphamchinh/6.jpg",mota:"- KEM TRỊ MỤN MENLY với thành phần chính gồm: tinh dầu tràm trà, tinh dầu cam thảo và vitamin B3 sẽ ngay lập tức làm GIẢM kích ứng tại vùng da bị mụn, làm dịu da và tiêu diệt vi khuẩn gây nên mụn. Sau khi bôi kem lên vùng da bị mụn, chỉ sau 48h, nốt mụn sẽ giảm sưng viêm và xẹp đi. Đặc biệt sản phẩm không hề gây khô da hoặc kích ứng, sử dụng được cho cả làn da nhạy cảm nhất." };
let spk1 = { masp: 101, tensp: "KEM TRỊ SẸO SCAR ESTHETIQUE ", dongia: 269000, hinhanh: "../images/sanpham/sanphamkhac/101.png",mota:"Scar Esthetique làm mềm và làm sáng sẹo. Công thức độc đáo của nó kết hợp 23 thành phần hiệu quả, để nuôi dưỡng da và nhằm mục tiêu đổi màu ở cấp độ tế bào. Kem trị sẹo silicone không gây nhờn và dễ dàng được hấp thụ bởi làn da của bạn. Nó tốt nhất cho các vết sẹo, khi sự đổi màu (tăng sắc tố) là mối quan tâm chính của bạn. Chúng tôi cũng khuyên bạn nên dùng kem xóa mờ sẹo này, để chữa lành sẹo lâu dài và sử dụng cho sẹo trên hai tuổi." };
let spk2 = { masp: 102, tensp: "KEM DƯỠNG TRẮNG DA VICTORIA", dongia: 295000, hinhanh: "../images/sanpham/sanphamkhac/102.png",mota:"-Kem dạng nén mềm tan nhanh và thấm sâu vào da khi thoa lên. sản phẩm được đóng gói kỹ càng bên trong hộp giấy và bao bọc bên ngoài bằng 1 lớp ni lon<br><br>- Công dụng : Loại bỏ những sắc tố đen. Ngăn ngừa tia UV gây sạm nám da, chống nắng hiệu quả rất cao, làm phai vết nám mờ tàn nhang xóa mụn, ngăn ngừa sự phát triển của mụn…làm mờ vết thâm do mụn để lại, làm se khít lỗ chân lông. Phục hồi làn da bị lão hóa, dưỡng ẩm giúp làm giảm vết nhăn, làm căng da mặt, làm da sạm trở nên trắng hồng tự nhiên, thích hợp làm kem lót nền trang điểm .Xóa mụn và ngăn ngừa mụn cực kì hiệu quả.<br>Xóa vết thâm lâu năm , thâm do mụn để lại và giúp da đều màu và giảm sẹo cho mụn<br> Kem dạng siêu mịn - sệt nhuyễn - dễ dàng tan chảy và thấm vào da mà không gây bí chân lông,</br> Chỉ số chống nắng cao - phù hợp cho mặt – giúp da trắng hồng mà không sợ bắt nắng- rất an toàn cho da<br><br>-Hướng dẫn sử dụng: Rửa sạch da mặt và lau khô. Thoa kem đều lên da một lớp mỏng, mỗi ngày 2 lần (sáng tối)<br>Trọng lượng 50g<br>- Chế độ hậu mãi : Bạn yên tâm khi mua sản phẩm của mình ạ, nếu da của bạn thuộc da dễ kích ứng hay dị ứng bạn cứ yên tâm mua ạ, nếu bị kích ứng hoặc dị ứng bạn gửi hàng lại cho mình và mình sẽ hoàn tiền ạ" };
let spk3 = { masp: 103, tensp: "KEM MỜ SẸO SCAR REJUVASIL", dongia: 329000, hinhanh: "../images/sanpham/sanphamkhac/103.jpg",mota:"Kem trị sẹo Rejuvaskin Scar Esthetique Silicone tác động trực tiếp lên các mô của vết sẹo thâm, sẹo lõm, làm mềm cấu trúc sẹo và tổng hợp các dưỡng chất, kích thích quá trình tăng sinh tế bào nguyên sợi và tế bào sừng, từ đó có khả năng làm đầy và làm mờ các vết sẹo một cách hiệu quả. Kem cũng giúp đẩy mạnh quá trình lưu thông máu giúp làm giảm sưng và các vết bầm tím nhanh chóng.<br><br>Sản phẩm giúp trung hòa các gốc tự do có hại trong các tế bào đồng thời còn có vai trò quan trọng trong việc hình thành collagen, kích thích các acid amin chuyển hóa và đẩy mạnh quá trình hấp thụ sắt. Làm mềm da và tái tạo các tế bào da một cách nhanh chóng. Cân bằng màu vùng da bị sẹo với những vùng da xung quanh, cho bạn một làn da đều màu." };
let spk4 = { masp: 104, tensp: "M45-KEM DƯỠNG TRẮNG DA DOCTOR MAGIC", dongia: 490000, hinhanh: "../images/sanpham/sanphamkhac/104.jpg",mota:"M45 – Kem Dưỡng Giúp Kích Trắng Da là sản phẩm thuộc thương hiệu Doctor Magic, do hệ thống thẩm mỹ viện Mailisa cung cấp và phân phối độc quyền. Doctor Magic, mỹ phẩm cao cấp – giá bình dân, với các sản phẩm làm đẹp cực nổi tiếng, được hàng triệu chị em yêu thích. <br><br>Sản phẩm được trải qua quá trình xử lý chất lượng nghiêm ngặt, áp dụng dây chuyền công nghệ tiên tiến và máy móc hiện đại theo tiêu chuẩn cao, mang đến sự an tâm và chất lượng tốt cho người dùng. Sản phẩm đã được Bộ Y Tế kiểm nghiệm và cấp phép lưu hành trên toàn quốc." };
let spk5 = { masp: 105, tensp: "KEM DƯỠNG TRẮNG DA CINDERA ", dongia: 870000, hinhanh: "../images/sanpham/sanphamkhac/105.jpg",mota:"- Kem dưỡng trắng da Cindera Hàn Quốc giảm vết nhăn, cải thiện sắc tố cho da, chống lão hóa da cực tốt. Kem Cindera trẻ hóa da toàn diện, nâng tông gấp 5 lần, xóa tan đốm nâu và nám, đồng thời cung cấp độ ẩm làm mềm da.<br>- Kem dưỡng trắng da Cindera cao cấp của Hàn Quốc mang đến vẻ đẹp hoàn hảo cho làn da phái đẹp.- Kem dưỡng trắng da Hàn Quốc Cindera trẻ hóa da toàn diện, sáng trắng gấp 5 lần so với bình thường.<br><br>- Cung cấp dưỡng chất giúp làn da căng mịn, cấp ẩm cho da mềm mượt.<br>- Xóa tan đốm nâu và nám, chống lão hóa da, giảm vết nhăn hiệu quả.<br>- Sản phẩm phù hợp với mọi làn da, đặc biệt là da lão hóa, xỉn màu..." };
let spk6 = { masp: 106, tensp: "KEM DƯỠNG TRÀ XANH INNISFREE", dongia: 390000, hinhanh: "../images/sanpham/sanphamkhac/106.jpg",mota:"- Kem Dưỡng Da Hỗn Hợp Innisfree Green Tea Balancing Cream EX 50ml với thành phần trà xanh thiên nhiên gấp 3.5 lần, có khả năng cấp nước dưỡng ẩm cho da cực tốt, phục hồi sức sống tự nhiên cho da, giúp da căng mướt, ẩm mượt và khỏe mạnh từ bên trong. Sản phẩm chuyên dành cho da hỗn hợp, những làn da bị kích ứng với ô nhiễm môi trường, làn da có mụn nhẹ.<br>- Kem dưỡng da Innisfree Green Tea Balancing Cream là loại sữa dưỡng với thành phần không chứa cồn, có tác dụng cấp nước và dưỡng ẩm nhẹ, ở mức độ vừa đủ cho da hỗn hợp đến da thường. Với Green Tea Balancing Cream, bạn sẽ không phải lo ngại sẽ bị khô da, bởi vì kem dưỡng trà xanh đã bổ sung thêm dưỡng chất, giúp cân bằng lượng nước cho làn da của bạn, không những kiềm dầu, sạch mụn mà còn cung cấp đầy đủ dưỡng chất cho da và ngăn ngừa mụn quay trở lại." };

let dssp  = [spc1, spc2, spc3, spc4, spc5, spc6,spk1, spk2, spk3, spk4, spk5, spk6];
let dsspc = [spc1, spc2, spc3, spc4, spc5, spc6];
let dsspk = [spk1, spk2, spk3, spk4, spk5, spk6];
let giohangs = new Set();

// hiện thị tất cả
  function hienThiTatCaSanPham(sp){
    let row = "<tr><td style='width:150px;'>"+sp.masp+"</td><td>"+sp.tensp+"</td><td>"+sp.dongia+"</td><td><a href='chitietsp.html'><img width='200' src='"+sp.hinhanh+"' onclick='hienThiChiTietSP(" + sp.masp + ");' </td><td>"+sp.mota+"</td></tr>"
    $("#tatcasanpham").append(row);
  }
  $(document).ready(function(){
    for (let i = 0; i < dssp.length; i++) {
      hienThiTatCaSanPham(dssp[i])
    }
    
  })

  
  function hienThiGioHang(){
    var tenSP = document.getElementById('tenSP').innerText;
    var soLuong = $("#soLuong").val(); 
    var hinhAnh = $("#anhSP").attr("src");
    var donGia = document.getElementById('giaSP').innerText;
    var thanhTien = donGia*soLuong
    let row = "<tr><td>"+tenSP+"</td><td>"+donGia+"</td><td><img width='200' src='"+hinhAnh+"'</td><td><p>"+soLuong+"</p></td><td>"+thanhTien+"</td></tr>"
    
    localStorage.setItem("row", row);
  }
  function napGH(){

    giohangs.add(localStorage.getItem("row"))
  }

  $(document).ready(function(){
    giohangs.add(localStorage.getItem("row"))
    for (let giohang of giohangs) {
      $("#giohang").append(giohang)
  }
  })



function hienThiChiTietSP(masp) {
  let sp = dssp.find(spTemp => spTemp.masp === masp);
  localStorage.setItem("masp", sp.masp);
  localStorage.setItem("tenSP", sp.tensp);
  localStorage.setItem("dongia", sp.dongia);
  localStorage.setItem("hinhanh", sp.hinhanh);
  localStorage.setItem("mota", sp.mota);
}
function hienThiChiTietSPC(masp) {
  let sp = dsspc.find(spTemp => spTemp.masp === masp);
  localStorage.setItem("masp", sp.masp);
  localStorage.setItem("tenSP", sp.tensp);
  localStorage.setItem("dongia", sp.dongia);
  localStorage.setItem("hinhanh", sp.hinhanh);
  localStorage.setItem("mota", sp.mota);
}
function hienThiChiTietSPK(masp) {
  let sp = dsspk.find(spTemp => spTemp.masp === masp);
  localStorage.setItem("masp", sp.masp);
  localStorage.setItem("tenSP", sp.tensp);
  localStorage.setItem("dongia", sp.dongia);
  localStorage.setItem("hinhanh", sp.hinhanh);
  localStorage.setItem("mota", sp.mota);
}


$(document).ready(function(){
  $("#tenSP").html(localStorage.getItem("tenSP"));
  $("#anhSP").attr("src",localStorage.getItem("hinhanh"));
  $("#giaSP").html(localStorage.getItem("dongia"));
  $("#mota").html(localStorage.getItem("mota"));
  let showADD= "<button type='button'class='btn btn-success btn-block' data-toggle='modal' id='btnThemVaoGioHang'onclick='hienThiGioHang()'onclick='napGH()'>THÊM VÀO GIỎ HÀNG</button>"
  $("#ThemVaoGioHang").append(showADD);
  });




function hienThiSPC1(sp){
  let showSP= 
  "<div class='col-md-4'> "+
      "<div class='panel panel-success'>"+
        "<div class='panel-heading'>"+sp.tensp+" </div>"+
        "<div class='panel-body'><a href='chitietsp.html'><img src='"+sp.hinhanh+"'  style='width:100%'' alt='Image' onclick='hienThiChiTietSPC(" + sp.masp + ");' >"+
        "</a></div>"+
        "<div class='panel-footer'> "+sp.dongia+" đ</div>"+
      "</div>"+
  "</div>";
  $("#sanPhamChinh").append(showSP);
}
function hienThiSPC2(sp){
  let showSP= 
  "<div class='col-md-4'> "+
      "<div class='panel panel-danger'>"+
        "<div class='panel-heading'>"+sp.tensp+" </div>"+
        "<div class='panel-body'><a href='chitietsp.html'><img src='"+sp.hinhanh+"'  style='width:100%'' alt='Image' onclick='hienThiChiTietSPC(" + sp.masp + ");'>"+
        "</a></div>"+
        "<div class='panel-footer'> "+sp.dongia +" đ</div>"+
      "</div>"+
  "</div>";
  $("#sanPhamChinh").append(showSP);
}
function hienThiSPC3(sp){
  let showSP= 
  "<div class='col-md-4'> "+
      "<div class='panel panel-primary'>"+
        "<div class='panel-heading'>"+sp.tensp+" </div>"+
        "<div class='panel-body'><a href='chitietsp.html'><img src='"+sp.hinhanh+"'  style='width:100%'' alt='Image' onclick='hienThiChiTietSPC(" + sp.masp + ");' >"+
        "</a></div>"+
        "<div class='panel-footer'> "+sp.dongia +" đ</div>"+
      "</div>"+
  "</div>";
  $("#sanPhamChinh").append(showSP);
}
function hienThiSPK1(sp){
  let showSP= 
  "<div class='col-md-4'> "+
      "<div class='panel panel-success'>"+
        "<div class='panel-heading'>"+sp.tensp+" </div>"+
        "<div class='panel-body'><a href='chitietsp.html'><img src='"+sp.hinhanh+"'  style='width:100%'' alt='Image' onclick='hienThiChiTietSPK(" + sp.masp + ");'>"+
        "</a></div>"+
        "<div class='panel-footer'> "+sp.dongia +" đ</div>"+
      "</div>"+
  "</div>";
  
  $("#sanPhamKhac").append(showSP);
}
function hienThiSPK2(sp){
  let showSP= 
  "<div class='col-md-4'> "+
      "<div class='panel panel-danger'>"+
        "<div class='panel-heading'>"+sp.tensp+" </div>"+
        "<div class='panel-body'><a href='chitietsp.html'><img src='"+sp.hinhanh+"'  style='width:100%'' alt='Image' onclick='hienThiChiTietSPK(" + sp.masp + ");'>"+
        "</a></div>"+
        "<div class='panel-footer'> "+sp.dongia +" đ</div>"+
      "</div>"+
  "</div>";
  $("#sanPhamKhac").append(showSP);
}
function hienThiSPK3(sp){
  let showSP= 
  "<div class='col-md-4'> "+
      "<div class='panel panel-primary'>"+
        "<div class='panel-heading'>"+sp.tensp+" </div>"+
        "<div class='panel-body'><a href='chitietsp.html'><img src='"+sp.hinhanh+"'  style='width:100%'' alt='Image' onclick='hienThiChiTietSPK(" + sp.masp + ");'>"+
        "</a></div>"+
        "<div class='panel-footer'> "+sp.dongia +" đ</div>"+
      "</div>"+
  "</div>";
  $("#sanPhamKhac").append(showSP);
}

$(document).ready(function(){
  for(let i = 0; i < dsspc.length; i++) {
    if(i%3===0)
    hienThiSPC3(dsspc[i])
    else if(i%2===1)
    hienThiSPC1(dsspc[i])
    else if(i%2===0)
    hienThiSPC2(dsspc[i])
  }
})
$(document).ready(function(){
  for(let i = 0; i < dsspk.length; i++) {
    if(i%3===0)
    hienThiSPK3(dsspk[i])
    else if(i%2===1)
    hienThiSPK1(dsspk[i])
    else if(i%2===0)
    hienThiSPK2(dsspk[i])
    
    
  }
})


//Nút số lượng mua hàng
$('input.input-qty').each(function() {
  var $this = $(this),
    qty = $this.parent().find('.is-form'),
    min = Number($this.attr('min')),
    max = Number($this.attr('max'))
  if (min == 0) {
    var d = 0
  } else d = min
  $(qty).on('click', function() {
    if ($(this).hasClass('minus')) {
      if (d > min) d += -1
    } else if ($(this).hasClass('plus')) {
      var x = Number($this.val()) + 1
      if (x <= max) d += 1
    }
    $this.attr('value', d).val(d)
  })
})
// Position menu
pos = $("#menuTop").position()
$(window).scroll(function(){
  var posSrcoll = $(document).scrollTop();
  if(parseInt(posSrcoll)>parseInt(pos.top)){
    $("#menuTop").addClass('fixed');
  }
  else{
    $("#menuTop").removeClass('fixed');
  }
  
})

//Tìm kiếm tat ca san pham

function timkiem(){
  let masp = $("#txtTimKiem").val(); 
  let regexMasp = /^\d+(\.\d+)?$/; //Test bài tập 8
  if(masp.trim()!=='' && !regexMasp.test(masp)){
      $("#thongBao").html("Mã sản phẩm phải là số ");
      $("#tatcasanpham").html("");
      return false;
  }

  if(masp.trim()===''){
      $("#myTable").html("");
      dssp.forEach(napSanpham);
      return true;
  }

  masp = parseInt(masp); //số
  let sp = dssp.find(spTemp => spTemp.masp == masp);
  if(sp == null){
      $("#thongBao").html("Không tìm thấy");
      $("#tatcasanpham").html("");
      return false;
  }

  $("#thongBao").html("");
  $("#tatcasanpham").html("");
  hienThiTatCaSanPham(sp);
  return true;
};

//timkiem index
function timTheoTen(){
  $("#thongbao").html("");
    $("#sanPhamChinh").html("");
    $("#sanPhamKhac").html("");
  for (let i = 0; i < dssp.length; i++) {
    var des = dssp[i].tensp;
    var key = $("#txtTimKiem").val().toUpperCase() ;
    
    var position = des.indexOf(key);
    if(position > -1 ){
      if(dssp[i].masp<10){
        hienThiSPC1(dssp[i]);
      }
      else {
        hienThiSPK1(dssp[i]);
      }
    }
   
  } 
}

//Mua hàng
function muaHang(){
  alert("Bạn đã mua sản phẩm")
}